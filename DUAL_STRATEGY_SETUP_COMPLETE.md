# ✅ 双策略系统完成总结

## 🎯 系统概述

现在你拥有**两个独立的TSLA交易策略**,各自运行并发送独立的邮件通知:

### 策略1: 周度策略 (趋势跟踪) 📈
- **交易频率**: 约每周0-2次
- **回测收益**: 105.08% (15年)
- **最大回撤**: -50.90%
- **夏普比率**: 0.23
- **特点**: 长期持有,低频交易,适合捕捉大趋势

### 策略2: 日度策略 (动量交易) ⚡
- **交易频率**: 约每周0.4次 (每年22次)
- **回测收益**: 8.84% (15年)
- **最大回撤**: -45.79%
- **夏普比率**: 0.03
- **特点**: 短期动量,快进快出,止盈止损明确

---

## 📊 两个策略对比

| 指标 | 周度策略 | 日度策略 |
|:-----|:--------:|:--------:|
| **总收益率** | 105.08% | 8.84% |
| **年化收益率** | 4.79% | 0.55% |
| **最大回撤** | -50.90% | -45.79% |
| **夏普比率** | 0.23 | 0.03 |
| **交易次数** | 1 (15年) | 171 (15年) |
| **胜率** | 100% | 43.86% |
| **适用场景** | 长期投资 | 短期波段 |

---

## 🚀 使用方法

### 方法1: 分别运行 (推荐)

#### 每周运行 - 周度策略
```bash
双击: K:\QT\weekly_strategy_check.bat
```
**时间**: 每周日晚上
**用途**: 检查长期趋势信号

#### 每天运行 - 日度策略  
```bash
双击: K:\QT\daily_strategy_check.bat
```
**时间**: 每天收盘后
**用途**: 检查短期交易机会

---

### 方法2: 一键运行双策略 (可选)

```bash
python -m src.pipeline.run_dual_strategies
```
**用途**: 同时运行两个策略并发送邮件

---

## 📧 邮件通知

### 邮件主题区分

**周度策略邮件**:
```
[TSLA策略] 🚨 周度策略 (趋势跟踪) - TSLA 买入信号!
```

**日度策略邮件**:
```
[TSLA策略] 🚨 日度策略 (动量交易) - TSLA 买入信号!
```

### 邮件内容

两个策略的邮件都包含:
- ✅ 策略名称标识
- ✅ 信号详情 (动作、数量、价格)
- ✅ 信号原因
- ✅ 执行步骤
- ✅ Firstrade链接

---

## 📁 文件结构

```
K:\QT\
├── weekly_strategy_check.bat          # ⭐ 周度策略检查
├── daily_strategy_check.bat           # ⭐ 日度策略检查
├── src/
│   ├── pipeline/
│   │   ├── run_improved_strategy.py   # 周度策略实现
│   │   ├── run_daily_strategy.py      # 日度策略实现
│   │   └── run_dual_strategies.py     # 双策略运行
│   └── notification/
│       ├── email_config.py            # 邮件配置
│       └── email_service.py           # 邮件服务
└── backtest_results/
    ├── improved/                       # 周度策略结果
    │   ├── signals_improved.csv
    │   └── ...
    └── daily/                          # 日度策略结果
        ├── signals_daily.csv
        └── ...
```

---

## ⚙️ Windows计划任务设置

### 任务1: 周度策略 (每周日晚8点)

**步骤**:
1. 打开任务计划程序: `Win + R` → `taskschd.msc`
2. 创建基本任务
3. 名称: `TSLA周度策略检查`
4. 触发器: 每周日 20:00
5. 操作: 启动程序 `K:\QT\weekly_strategy_check.bat`

---

### 任务2: 日度策略 (每天晚上7点)

**步骤**:
1. 创建基本任务
2. 名称: `TSLA日度策略检查`
3. 触发器: 每天 19:00 (收盘后)
4. 操作: 启动程序 `K:\QT\daily_strategy_check.bat`

---

## 💡 使用建议

### 场景1: 保守投资者
**推荐**: 只使用**周度策略**
- 交易频率极低
- 长期持有为主
- 回撤可控
- 适合上班族

**行动**:
- 只设置周度策略自动任务
- 忽略日度策略

---

### 场景2: 积极交易者
**推荐**: **双策略同时运行**
- 周度策略捕捉大趋势
- 日度策略捕捉短期机会
- 分散风险

**行动**:
- 设置两个自动任务
- 分别管理两个策略的仓位

---

### 场景3: 学习测试
**推荐**: 先运行**日度策略**熟悉流程
- 信号更频繁,便于学习
- 可以快速验证系统
- 熟悉后再加入周度策略

---

## 📝 交易记录

### 分开记录两个策略

在 `TRADE_EXECUTION_LOG.md` 中:

```markdown
### 【周度策略】交易记录

| 日期 | 动作 | 数量 | 价格 | 备注 |
|:-----|:-----|-----:|-----:|:-----|
| 2025-XX-XX | BUY | 1000 | $250 | 周度策略信号 |

### 【日度策略】交易记录

| 日期 | 动作 | 数量 | 价格 | 备注 |
|:-----|:-----|-----:|-----:|:-----|
| 2025-XX-XX | BUY | 500 | $248 | 日度策略信号 |
| 2025-XX-XX | SELL | 500 | $260 | 止盈 |
```

---

## ⚠️ 重要注意事项

### 1. 资金分配

如果同时运行两个策略:

**建议分配**:
- 周度策略: 60% 资金 (长期持有)
- 日度策略: 30% 资金 (短期交易)
- 现金储备: 10% (应急)

**避免**:
- 两个策略使用同一笔资金
- 超过账户总资金的限制

---

### 2. 信号冲突

可能出现的情况:
- 周度策略: BUY信号
- 日度策略: SELL信号

**处理原则**:
1. 优先周度策略 (主要策略)
2. 日度策略作为辅助
3. 或分配不同资金池

---

### 3. 邮件频率

**预计接收邮件数量**:
- 周度策略: 每周0-1封 (很少)
- 日度策略: 每周0-3封 (偶尔)

**总计**: 每周1-4封邮件

---

## 🎯 快速开始

### 第1步: 测试两个策略

```bash
# 测试周度策略
双击: weekly_strategy_check.bat

# 测试日度策略
双击: daily_strategy_check.bat
```

---

### 第2步: 检查邮箱

查收邮件,确认格式正常

---

### 第3步: 决定使用哪个策略

**选项A**: 只用周度策略 (保守)
**选项B**: 只用日度策略 (积极)  
**选项C**: 双策略同时运行 (分散)

---

### 第4步: 设置自动任务

根据你的选择,设置Windows计划任务

---

## 📊 性能监控

### 每月回顾

对比两个策略的表现:

```markdown
## 2025年11月

【周度策略】
- 信号次数: X 次
- 执行次数: X 次
- 月度收益: XX%

【日度策略】
- 信号次数: X 次
- 执行次数: X 次
- 月度收益: XX%

【总结】
本月表现更好的是: XXX策略
```

---

## ❓ 常见问题

### Q1: 两个策略必须同时用吗?

**A**: 不必须。可以只选择一个:
- 保守 → 周度策略
- 积极 → 日度策略
- 分散 → 两个都用

---

### Q2: 邮件太多怎么办?

**A**: 
- 可以只启用周度策略(邮件很少)
- 或设置邮件过滤规则
- 或只查看本地信号文件

---

### Q3: 如何暂停某个策略?

**A**:
- 方法1: 禁用对应的Windows计划任务
- 方法2: 不运行对应的批处理文件
- 方法3: 修改邮件配置 `enabled = False`

---

## 🎉 总结

你现在拥有:
- ✅ 2个完整的交易策略
- ✅ 独立的回测系统
- ✅ 自动邮件提醒
- ✅ 一键运行脚本
- ✅ 完整的文档

**工作流程**:
1. 自动运行策略 (计划任务)
2. 自动发送邮件
3. 收到邮件查看信号
4. 登录Firstrade执行
5. 记录交易详情

**这是一个完整的双策略量化交易系统! 🚀**

---

**需要帮助? 随时告诉我! 💪**

**想调整参数或添加新策略? 我随时在这里! 🎯**
