# ✅ 三支股票日度策略邮件说明

## 邮件发送方式

### 📧 当前实现
使用 `send_all_strategy_emails.py` 时,会**连续发送3封独立邮件**:
1. 第1封: TSLA策略报告
2. 第2封: NVDA策略报告  
3. 第3封: INTC策略报告

每封邮件都是**独立的**,包含单个股票的完整信息。

### 📬 您收到的邮件
如果您在邮箱中看到"一个邮件里有3支股票的回测记录",可能是以下情况:

#### 情况1: Gmail会话视图
Gmail默认会将相关邮件**折叠成一个会话**:
- 主题相似的邮件会被归为一组
- 点击邮件标题可以展开查看所有邮件
- 右上角会显示邮件数量 (如 "3条消息")

**解决方法**: 
- 点击邮件标题展开查看
- 或在设置中关闭"会话视图"

#### 情况2: 邮件聚合显示
某些邮件客户端会将同一时间段的邮件聚合显示。

## 验证方法

### 📋 检查清单

请在邮箱中确认:

1. **查看邮件数量**
   - 如果是3封独立邮件,在收件箱列表中应该看到3个条目
   - 如果Gmail折叠了,点击会看到 "(3)"

2. **查看邮件主题**
   - [TSLA策略] 📊 日度策略回测完成
   - [NVDA策略] 📊 日度策略回测完成
   - [INTC策略] 📊 日度策略回测完成

3. **查看发送时间**
   - 三封邮件应该几乎同时到达
   - 时间差通常在1-2分钟内

4. **查看邮件内容**
   - 每封邮件只包含一支股票的信息
   - TSLA邮件里不会有NVDA或INTC的数据

## 如何查看所有邮件 (Gmail)

### 方法1: 展开会话
1. 点击邮件标题
2. 查看右上角是否显示 "(3)" 或类似数字
3. 点击展开查看所有邮件

### 方法2: 关闭会话视图
1. 点击右上角设置图标 ⚙️
2. 选择"查看所有设置"
3. 在"常规"标签页中
4. 找到"会话视图"
5. 选择"会话视图关闭"
6. 保存更改

### 方法3: 搜索特定股票
在Gmail搜索框输入:
- `subject:TSLA` - 查看TSLA邮件
- `subject:NVDA` - 查看NVDA邮件
- `subject:INTC` - 查看INTC邮件

## 当前发送的邮件内容

### 📊 每封邮件包含的信息

#### TSLA策略邮件
```
主题: [TSLA策略] 📊 日度策略回测完成

内容:
- 股票代码: TSLA
- 总信号数: 342
- 总收益率: +8.84%
- 最新信号: 2025-10-24 SELL
- 价格: $433.72
- 数量: 148
- 原因: 止损 (亏损-3.40%)
```

#### NVDA策略邮件
```
主题: [NVDA策略] 📊 日度策略回测完成

内容:
- 股票代码: NVDA
- 总信号数: 16
- 总收益率: -11.24%
- 最新信号: 2025-11-05 SELL
- 价格: $195.21
- 数量: 269
- 原因: 止损 (亏损-2.90%)
```

#### INTC策略邮件
```
主题: [INTC策略] 📊 日度策略回测完成

内容:
- 股票代码: INTC
- 总信号数: 28
- 总收益率: +0.30%
- 最新信号: 2025-10-28 SELL
- 价格: $41.53
- 数量: 1,497
- 原因: 止盈 (盈利8.49%)
```

## 如果确实只收到一封邮件

如果您确认只收到了**一封邮件包含所有三支股票**,那么可能是:

### 原因分析
1. **使用了其他脚本**: 可能之前运行了汇总邮件的脚本
2. **邮箱规则**: Gmail可能有自动合并邮件的规则
3. **邮件客户端**: 某些邮件客户端会自动整理邮件

### 解决方案
如果您希望收到**三封独立的邮件**,请确保:
1. 运行的是 `send_all_strategy_emails.py`
2. 查看终端输出,确认发送了3次
3. 检查Gmail设置,确保没有自动整理规则

## 未来改进建议

### 选项1: 发送汇总邮件 (推荐)
创建一个脚本,**一封邮件包含所有三支股票**的对比:
```
主题: [策略汇总] 📊 三支股票日度策略回测

内容:
┌──────────────────────────────────┐
│ TSLA: +8.84%  ✅ 最佳          │
│ INTC: +0.30%  ✅ 持平          │
│ NVDA: -11.24% ❌ 亏损          │
└──────────────────────────────────┘
```

### 选项2: 保持当前方式
继续发送三封独立邮件,每封专注一支股票。

### 选项3: 提供选择
创建两个脚本:
- `send_all_emails.bat` - 发送3封独立邮件
- `send_summary_email.bat` - 发送1封汇总邮件

## 当前状态确认

### ✅ 邮件已发送
根据终端输出:
```
✅ TSLA: 邮件发送成功!
✅ NVDA: 邮件发送成功!
✅ INTC: 邮件发送成功!
```

### 📬 应收到的邮件
- **数量**: 3封独立邮件
- **主题**: 分别标注 [TSLA策略]、[NVDA策略]、[INTC策略]
- **收件人**: qsswgl@gmail.com
- **发件人**: 13794881@qq.com

### 🔍 如何确认
1. 在Gmail中搜索: `from:13794881@qq.com`
2. 查看今天收到的邮件数量
3. 展开Gmail会话查看所有邮件

---

## 总结

您看到"一个邮件里有3支股票的回测记录"是**正常的Gmail显示行为**:
- ✅ 实际发送了3封独立邮件
- ✅ Gmail将它们归为一个会话显示
- ✅ 点击展开可以看到每封邮件的完整内容

如果您需要调整邮件格式或发送方式,请告诉我!

---

**说明文档创建时间**: 2025年11月15日
**当前邮件发送方式**: 3封独立邮件
**Gmail显示方式**: 会话视图(可能折叠显示)
